<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.5;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQ1046877154ï¼Œå¾®ä¿¡loveu_110è·å–</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                11è®²é€šé“çš„é«˜çº§ç©æ³•
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/1c/11/1c765950e3642867b2df2d839e67f711.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡äº†é€šé“çš„åŸºæœ¬æ“ä½œä»¥åŠèƒŒåçš„è§„åˆ™ã€‚ä»Šå¤©ï¼Œæˆ‘å†æ¥è®²è®²é€šé“çš„é«˜çº§ç©æ³•ã€‚</p>
<p>é¦–å…ˆæ¥è¯´è¯´å•å‘é€šé“ã€‚æˆ‘ä»¬åœ¨è¯´â€œé€šé“â€çš„æ—¶å€™æŒ‡çš„éƒ½æ˜¯åŒå‘é€šé“ï¼Œå³ï¼šæ—¢å¯ä»¥å‘ä¹Ÿå¯ä»¥æ”¶çš„é€šé“ã€‚</p>
<p>æ‰€è°“å•å‘é€šé“å°±æ˜¯ï¼Œåªèƒ½å‘ä¸èƒ½æ”¶ï¼Œæˆ–è€…åªèƒ½æ”¶ä¸èƒ½å‘çš„é€šé“ã€‚ä¸€ä¸ªé€šé“æ˜¯åŒå‘çš„ï¼Œè¿˜æ˜¯å•å‘çš„æ˜¯ç”±å®ƒçš„ç±»å‹å­—é¢é‡ä½“ç°çš„ã€‚</p>
<p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨ä¸Šç¯‡æ–‡ç« ä¸­è¯´è¿‡çš„æ¥æ”¶æ“ä½œç¬¦<code>&lt;-</code>å—ï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠå®ƒç”¨åœ¨é€šé“çš„ç±»å‹å­—é¢é‡ä¸­ï¼Œé‚£ä¹ˆå®ƒä»£è¡¨çš„å°±ä¸æ˜¯â€œå‘é€â€æˆ–â€œæ¥æ”¶â€çš„åŠ¨ä½œäº†ï¼Œè€Œæ˜¯è¡¨ç¤ºé€šé“çš„æ–¹å‘ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code>var uselessChan = make(chan&lt;- int, 1)
</code></pre>
<p>æˆ‘å£°æ˜å¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªåå«<code>uselessChan</code>çš„å˜é‡ã€‚è¿™ä¸ªå˜é‡çš„ç±»å‹æ˜¯<code>chan&lt;- int</code>ï¼Œå®¹é‡æ˜¯<code>1</code>ã€‚</p>
<p>è¯·æ³¨æ„ç´§æŒ¨åœ¨å…³é”®å­—<code>chan</code>å³è¾¹çš„é‚£ä¸ª<code>&lt;-</code>ï¼Œè¿™è¡¨ç¤ºäº†è¿™ä¸ªé€šé“æ˜¯å•å‘çš„ï¼Œå¹¶ä¸”åªèƒ½å‘è€Œä¸èƒ½æ”¶ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œå¦‚æœè¿™ä¸ªæ“ä½œç¬¦ç´§æŒ¨åœ¨<code>chan</code>çš„å·¦è¾¹ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¯¥é€šé“åªèƒ½æ”¶ä¸èƒ½å‘ã€‚æ‰€ä»¥ï¼Œå‰è€…å¯ä»¥è¢«ç®€ç§°ä¸ºå‘é€é€šé“ï¼Œåè€…å¯ä»¥è¢«ç®€ç§°ä¸ºæ¥æ”¶é€šé“ã€‚</p>
<p>æ³¨æ„ï¼Œä¸å‘é€æ“ä½œå’Œæ¥æ”¶æ“ä½œå¯¹åº”ï¼Œè¿™é‡Œçš„â€œå‘â€å’Œâ€œæ”¶â€éƒ½æ˜¯ç«™åœ¨æ“ä½œé€šé“çš„ä»£ç çš„è§’åº¦ä¸Šè¯´çš„ã€‚</p>
<p>ä»ä¸Šè¿°å˜é‡çš„åå­—ä¸Šä½ ä¹Ÿèƒ½çŒœåˆ°ï¼Œè¿™æ ·çš„é€šé“æ˜¯æ²¡ç”¨çš„ã€‚é€šé“å°±æ˜¯ä¸ºäº†ä¼ é€’æ•°æ®è€Œå­˜åœ¨çš„ï¼Œå£°æ˜ä¸€ä¸ªåªæœ‰ä¸€ç«¯ï¼ˆå‘é€ç«¯æˆ–è€…æ¥æ”¶ç«¯ï¼‰èƒ½ç”¨çš„é€šé“æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚é‚£ä¹ˆï¼Œå•å‘é€šé“çš„ç”¨é€”ç©¶ç«Ÿåœ¨å“ªå„¿å‘¢ï¼Ÿ</p><!-- [[[read_end]]] -->
<p><strong>é—®é¢˜ï¼šå•å‘é€šé“æœ‰ä»€ä¹ˆåº”ç”¨ä»·å€¼ï¼Ÿ</strong></p>
<p>ä½ å¯ä»¥å…ˆè‡ªå·±æƒ³æƒ³ï¼Œç„¶åå†æ¥ç€å¾€ä¸‹çœ‹ã€‚</p>
<p><strong>å…¸å‹å›ç­”</strong></p>
<p>æ¦‚æ‹¬åœ°è¯´ï¼Œå•å‘é€šé“æœ€ä¸»è¦çš„ç”¨é€”å°±æ˜¯çº¦æŸå…¶ä»–ä»£ç çš„è¡Œä¸ºã€‚</p>
<p><strong>é—®é¢˜è§£æ</strong></p>
<p>è¿™éœ€è¦ä»ä¸¤ä¸ªæ–¹é¢è®²ï¼Œéƒ½è·Ÿå‡½æ•°çš„å£°æ˜æœ‰äº›å…³ç³»ã€‚å…ˆæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code>func SendInt(ch chan&lt;- int) {
	ch &lt;- rand.Intn(1000)
}
</code></pre>
<p>æˆ‘ç”¨<code>func</code>å…³é”®å­—å£°æ˜äº†ä¸€ä¸ªå«åš<code>SendInt</code>çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åªæ¥å—ä¸€ä¸ª<code>chan&lt;- int</code>ç±»å‹çš„å‚æ•°ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­çš„ä»£ç åªèƒ½å‘å‚æ•°<code>ch</code>å‘é€å…ƒç´ å€¼ï¼Œè€Œä¸èƒ½ä»å®ƒé‚£é‡Œæ¥æ”¶å…ƒç´ å€¼ã€‚è¿™å°±èµ·åˆ°äº†çº¦æŸå‡½æ•°è¡Œä¸ºçš„ä½œç”¨ã€‚</p>
<p>ä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘è‡ªå·±å†™çš„å‡½æ•°è‡ªå·±è‚¯å®šèƒ½ç¡®å®šæ“ä½œé€šé“çš„æ–¹å¼ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†çº¦æŸï¼Ÿå¥½å§ï¼Œè¿™ä¸ªä¾‹å­å¯èƒ½è¿‡äºç®€å•äº†ã€‚åœ¨å®é™…åœºæ™¯ä¸­ï¼Œè¿™ç§çº¦æŸä¸€èˆ¬ä¼šå‡ºç°åœ¨æ¥å£ç±»å‹å£°æ˜ä¸­çš„æŸä¸ªæ–¹æ³•å®šä¹‰ä¸Šã€‚è¯·çœ‹è¿™ä¸ªå«<code>Notifier</code>çš„æ¥å£ç±»å‹å£°æ˜ï¼š</p>
<pre><code>type Notifier interface {
	SendInt(ch chan&lt;- int)
}
</code></pre>
<p>åœ¨æ¥å£ç±»å‹å£°æ˜çš„èŠ±æ‹¬å·ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½ä»£è¡¨ç€ä¸€ä¸ªæ–¹æ³•çš„å®šä¹‰ã€‚æ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰ä¸å‡½æ•°å£°æ˜å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯åªåŒ…å«äº†æ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨å’Œç»“æœåˆ—è¡¨ã€‚</p>
<p>ä¸€ä¸ªç±»å‹å¦‚æœæƒ³æˆä¸ºä¸€ä¸ªæ¥å£ç±»å‹çš„å®ç°ç±»å‹ï¼Œé‚£ä¹ˆå°±å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªæ–¹æ³•çš„å®šä¹‰ä¸­ä½¿ç”¨äº†å•å‘é€šé“ç±»å‹ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºåœ¨å¯¹å®ƒçš„æ‰€æœ‰å®ç°åšå‡ºçº¦æŸã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œ<code>Notifier</code>æ¥å£ä¸­çš„<code>SendInt</code>æ–¹æ³•åªä¼šæ¥å—ä¸€ä¸ªå‘é€é€šé“ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥ï¼Œåœ¨è¯¥æ¥å£çš„æ‰€æœ‰å®ç°ç±»å‹ä¸­çš„<code>SendInt</code>æ–¹æ³•éƒ½ä¼šå—åˆ°é™åˆ¶ã€‚è¿™ç§çº¦æŸæ–¹å¼è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬ç¼–å†™æ¨¡æ¿ä»£ç æˆ–è€…å¯æ‰©å±•çš„ç¨‹åºåº“çš„æ—¶å€™ã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨<code>SendInt</code>å‡½æ•°çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠä¸€ä¸ªå…ƒç´ ç±»å‹åŒ¹é…çš„åŒå‘é€šé“ä¼ ç»™å®ƒå°±è¡Œäº†ï¼Œæ²¡å¿…è¦ç”¨å‘é€é€šé“ï¼Œå› ä¸ºGoè¯­è¨€åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šè‡ªåŠ¨åœ°æŠŠåŒå‘é€šé“è½¬æ¢ä¸ºå‡½æ•°æ‰€éœ€çš„å•å‘é€šé“ã€‚</p>
<pre><code>intChan1 := make(chan int, 3)
SendInt(intChan1)
</code></pre>
<p>åœ¨å¦ä¸€ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨å‡½æ•°å£°æ˜çš„ç»“æœåˆ—è¡¨ä¸­ä½¿ç”¨å•å‘é€šé“ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>func getIntChan() &lt;-chan int {
	num := 5
	ch := make(chan int, num)
	for i := 0; i &lt; num; i++ {
		ch &lt;- i
	}
	close(ch)
	return ch
}
</code></pre>
<p>å‡½æ•°<code>getIntChan</code>ä¼šè¿”å›ä¸€ä¸ª<code>&lt;-chan int</code>ç±»å‹çš„é€šé“ï¼Œè¿™å°±æ„å‘³ç€å¾—åˆ°è¯¥é€šé“çš„ç¨‹åºï¼Œåªèƒ½ä»é€šé“ä¸­æ¥æ”¶å…ƒç´ å€¼ã€‚è¿™å®é™…ä¸Šå°±æ˜¯å¯¹å‡½æ•°è°ƒç”¨æ–¹çš„ä¸€ç§çº¦æŸäº†ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬åœ¨Goè¯­è¨€ä¸­è¿˜å¯ä»¥å£°æ˜å‡½æ•°ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°ç±»å‹ä¸­ä½¿ç”¨äº†å•å‘é€šé“ï¼Œé‚£ä¹ˆå°±ç›¸ç­‰äºåœ¨çº¦æŸæ‰€æœ‰å®ç°äº†è¿™ä¸ªå‡½æ•°ç±»å‹çš„å‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬å†é¡ºä¾¿çœ‹ä¸€ä¸‹è°ƒç”¨<code>getIntChan</code>çš„ä»£ç ï¼š</p>
<pre><code>intChan2 := getIntChan()
for elem := range intChan2 {
	fmt.Printf(&quot;The element in intChan2: %v\n&quot;, elem)
}
</code></pre>
<p>æˆ‘æŠŠè°ƒç”¨<code>getIntChan</code>å¾—åˆ°çš„ç»“æœå€¼èµ‹ç»™äº†å˜é‡<code>intChan2</code>ï¼Œç„¶åç”¨<code>for</code>è¯­å¥å¾ªç¯åœ°å–å‡ºäº†è¯¥é€šé“ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚</p>
<p>è¿™é‡Œçš„<code>for</code>è¯­å¥ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºå¸¦æœ‰<code>range</code>å­å¥çš„<code>for</code>è¯­å¥ã€‚å®ƒçš„ç”¨æ³•æˆ‘åœ¨åé¢è®²<code>for</code>è¯­å¥çš„æ—¶å€™ä¸“é—¨è¯´æ˜ã€‚ç°åœ¨ä½ åªéœ€è¦çŸ¥é“å…³äºå®ƒçš„ä¸‰ä»¶äº‹ã€‚</p>
<ul>
<li>ä¸€ã€è¿™æ ·ä¸€æ¡<code>for</code>è¯­å¥ä¼šä¸æ–­åœ°å°è¯•ä»<code>intChan2</code>ç§å–å‡ºå…ƒç´ å€¼ï¼Œå³ä½¿<code>intChan2</code>è¢«å…³é—­ï¼Œå®ƒä¹Ÿä¼šåœ¨å–å‡ºæ‰€æœ‰å‰©ä½™çš„å…ƒç´ å€¼ä¹‹åå†ç»“æŸæ‰§è¡Œã€‚</li>
<li>äºŒã€å½“<code>intChan2</code>ä¸­æ²¡æœ‰å…ƒç´ å€¼æ—¶ï¼Œå®ƒä¼šè¢«é˜»å¡åœ¨æœ‰<code>for</code>å…³é”®å­—çš„é‚£ä¸€è¡Œï¼Œç›´åˆ°æœ‰æ–°çš„å…ƒç´ å€¼å¯å–ã€‚</li>
<li>ä¸‰ã€å‡è®¾<code>intChan2</code>çš„å€¼ä¸º<code>nil</code>ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«æ°¸è¿œé˜»å¡åœ¨æœ‰<code>for</code>å…³é”®å­—çš„é‚£ä¸€è¡Œã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å¸¦<code>range</code>å­å¥çš„<code>for</code>è¯­å¥ä¸é€šé“çš„è”ç”¨æ–¹å¼ã€‚ä¸è¿‡ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨é€”æ¯”è¾ƒå¹¿æ³›çš„è¯­å¥ï¼Œè¿˜å¯ä»¥è¢«ç”¨æ¥ä»å…¶ä»–ä¸€äº›ç±»å‹çš„å€¼ä¸­è·å–å…ƒç´ ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒGoè¯­è¨€è¿˜æœ‰ä¸€ç§ä¸“é—¨ä¸ºäº†æ“ä½œé€šé“è€Œå­˜åœ¨çš„è¯­å¥ï¼š<code>select</code>è¯­å¥ã€‚</p>
<p><strong>çŸ¥è¯†æ‰©å±•</strong></p>
<p><strong>é—®é¢˜1ï¼š<code>select</code>è¯­å¥ä¸é€šé“æ€æ ·è”ç”¨ï¼Œåº”è¯¥æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ</strong></p>
<p><code>select</code>è¯­å¥åªèƒ½ä¸é€šé“è”ç”¨ï¼Œå®ƒä¸€èˆ¬ç”±è‹¥å¹²ä¸ªåˆ†æ”¯ç»„æˆã€‚æ¯æ¬¡æ‰§è¡Œè¿™ç§è¯­å¥çš„æ—¶å€™ï¼Œä¸€èˆ¬åªæœ‰ä¸€ä¸ªåˆ†æ”¯ä¸­çš„ä»£ç ä¼šè¢«è¿è¡Œã€‚</p>
<p><code>select</code>è¯­å¥çš„åˆ†æ”¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§å«åšå€™é€‰åˆ†æ”¯ï¼Œå¦ä¸€ç§å«åšé»˜è®¤åˆ†æ”¯ã€‚å€™é€‰åˆ†æ”¯æ€»æ˜¯ä»¥å…³é”®å­—<code>case</code>å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼å’Œä¸€ä¸ªå†’å·ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä»ä¸‹ä¸€è¡Œå¼€å§‹å†™å…¥å½“åˆ†æ”¯è¢«é€‰ä¸­æ—¶éœ€è¦æ‰§è¡Œçš„è¯­å¥ã€‚</p>
<p>é»˜è®¤åˆ†æ”¯å…¶å®å°±æ˜¯default caseï¼Œå› ä¸ºï¼Œå½“ä¸”ä»…å½“æ²¡æœ‰å€™é€‰åˆ†æ”¯è¢«é€‰ä¸­æ—¶å®ƒæ‰ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥å®ƒä»¥å…³é”®å­—<code>default</code>å¼€å¤´å¹¶ç›´æ¥åè·Ÿä¸€ä¸ªå†’å·ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>default:</code>çš„ä¸‹ä¸€è¡Œå†™å…¥è¦æ‰§è¡Œçš„è¯­å¥ã€‚</p>
<p>ç”±äº<code>select</code>è¯­å¥æ˜¯ä¸“ä¸ºé€šé“è€Œè®¾è®¡çš„ï¼Œæ‰€ä»¥æ¯ä¸ª<code>case</code>è¡¨è¾¾å¼ä¸­éƒ½åªèƒ½åŒ…å«æ“ä½œé€šé“çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚æ¥æ”¶è¡¨è¾¾å¼ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŠŠæ¥æ”¶è¡¨è¾¾å¼çš„ç»“æœèµ‹ç»™å˜é‡çš„è¯ï¼Œè¿˜å¯ä»¥æŠŠè¿™é‡Œå†™æˆèµ‹å€¼è¯­å¥æˆ–è€…çŸ­å˜é‡å£°æ˜ã€‚ä¸‹é¢å±•ç¤ºä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p>
<pre><code>// å‡†å¤‡å¥½å‡ ä¸ªé€šé“ã€‚
intChannels := [3]chan int{
	make(chan int, 1),
	make(chan int, 1),
	make(chan int, 1),
}
// éšæœºé€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œå¹¶å‘å®ƒå‘é€å…ƒç´ å€¼ã€‚
index := rand.Intn(3)
fmt.Printf(&quot;The index: %d\n&quot;, index)
intChannels[index] &lt;- index
// å“ªä¸€ä¸ªé€šé“ä¸­æœ‰å¯å–çš„å…ƒç´ å€¼ï¼Œå“ªä¸ªå¯¹åº”çš„åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚
select {
case &lt;-intChannels[0]:
	fmt.Println(&quot;The first candidate case is selected.&quot;)
case &lt;-intChannels[1]:
	fmt.Println(&quot;The second candidate case is selected.&quot;)
case elem := &lt;-intChannels[2]:
	fmt.Printf(&quot;The third candidate case is selected, the element is %d.\n&quot;, elem)
default:
	fmt.Println(&quot;No candidate case is selected!&quot;)
}
</code></pre>
<p>æˆ‘å…ˆå‡†å¤‡å¥½äº†ä¸‰ä¸ªç±»å‹ä¸º<code>chan int</code>ã€å®¹é‡ä¸º<code>1</code>çš„é€šé“ï¼Œå¹¶æŠŠå®ƒä»¬å­˜å…¥äº†ä¸€ä¸ªå«åš<code>intChannels</code>çš„æ•°ç»„ã€‚</p>
<p>ç„¶åï¼Œæˆ‘éšæœºé€‰æ‹©ä¸€ä¸ªèŒƒå›´åœ¨[0, 2]çš„æ•´æ•°ï¼ŒæŠŠå®ƒä½œä¸ºç´¢å¼•åœ¨ä¸Šè¿°æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œå¹¶å‘å…¶ä¸­å‘é€ä¸€ä¸ªå…ƒç´ å€¼ã€‚</p>
<p>æœ€åï¼Œæˆ‘ç”¨ä¸€ä¸ªåŒ…å«äº†ä¸‰ä¸ªå€™é€‰åˆ†æ”¯çš„<code>select</code>è¯­å¥ï¼Œåˆ†åˆ«å°è¯•ä»ä¸Šè¿°ä¸‰ä¸ªé€šé“ä¸­æ¥æ”¶å…ƒç´ å€¼ï¼Œå“ªä¸€ä¸ªé€šé“ä¸­æœ‰å€¼ï¼Œå“ªä¸€ä¸ªå¯¹åº”çš„å€™é€‰åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚åé¢è¿˜æœ‰ä¸€ä¸ªé»˜è®¤åˆ†æ”¯ï¼Œä¸è¿‡åœ¨è¿™é‡Œå®ƒæ˜¯ä¸å¯èƒ½è¢«é€‰ä¸­çš„ã€‚</p>
<p>åœ¨ä½¿ç”¨<code>select</code>è¯­å¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ³¨æ„ä¸‹é¢å‡ ä¸ªäº‹æƒ…ã€‚</p>
<ol>
<li>å¦‚æœåƒä¸Šè¿°ç¤ºä¾‹é‚£æ ·åŠ å…¥äº†é»˜è®¤åˆ†æ”¯ï¼Œé‚£ä¹ˆæ— è®ºæ¶‰åŠé€šé“æ“ä½œçš„è¡¨è¾¾å¼æ˜¯å¦æœ‰é˜»å¡ï¼Œ<code>select</code>è¯­å¥éƒ½ä¸ä¼šè¢«é˜»å¡ã€‚å¦‚æœé‚£å‡ ä¸ªè¡¨è¾¾å¼éƒ½é˜»å¡äº†ï¼Œæˆ–è€…è¯´éƒ½æ²¡æœ‰æ»¡è¶³æ±‚å€¼çš„æ¡ä»¶ï¼Œé‚£ä¹ˆé»˜è®¤åˆ†æ”¯å°±ä¼šè¢«é€‰ä¸­å¹¶æ‰§è¡Œã€‚</li>
<li>å¦‚æœæ²¡æœ‰åŠ å…¥é»˜è®¤åˆ†æ”¯ï¼Œé‚£ä¹ˆä¸€æ—¦æ‰€æœ‰çš„<code>case</code>è¡¨è¾¾å¼éƒ½æ²¡æœ‰æ»¡è¶³æ±‚å€¼æ¡ä»¶ï¼Œé‚£ä¹ˆ<code>select</code>è¯­å¥å°±ä¼šè¢«é˜»å¡ã€‚ç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶ä¸ºæ­¢ã€‚</li>
<li>è¿˜è®°å¾—å—ï¼Ÿæˆ‘ä»¬å¯èƒ½ä¼šå› ä¸ºé€šé“å…³é—­äº†ï¼Œè€Œç›´æ¥ä»é€šé“æ¥æ”¶åˆ°ä¸€ä¸ªå…¶å…ƒç´ ç±»å‹çš„é›¶å€¼ã€‚æ‰€ä»¥ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ¥æ”¶è¡¨è¾¾å¼çš„ç¬¬äºŒä¸ªç»“æœå€¼æ¥åˆ¤æ–­é€šé“æ˜¯å¦å·²ç»å…³é—­ã€‚ä¸€æ—¦å‘ç°æŸä¸ªé€šé“å…³é—­äº†ï¼Œæˆ‘ä»¬å°±åº”è¯¥åŠæ—¶åœ°å±è”½æ‰å¯¹åº”çš„åˆ†æ”¯æˆ–è€…é‡‡å–å…¶ä»–æªæ–½ã€‚è¿™å¯¹äºç¨‹åºé€»è¾‘å’Œç¨‹åºæ€§èƒ½éƒ½æ˜¯æœ‰å¥½å¤„çš„ã€‚</li>
<li><code>select</code>è¯­å¥åªèƒ½å¯¹å…¶ä¸­çš„æ¯ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼å„æ±‚å€¼ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¿ç»­æˆ–å®šæ—¶åœ°æ“ä½œå…¶ä¸­çš„é€šé“çš„è¯ï¼Œå°±å¾€å¾€éœ€è¦é€šè¿‡åœ¨<code>for</code>è¯­å¥ä¸­åµŒå…¥<code>select</code>è¯­å¥çš„æ–¹å¼å®ç°ã€‚ä½†è¿™æ—¶è¦æ³¨æ„ï¼Œç®€å•åœ°åœ¨<code>select</code>è¯­å¥çš„åˆ†æ”¯ä¸­ä½¿ç”¨<code>break</code>è¯­å¥ï¼Œåªèƒ½ç»“æŸå½“å‰çš„<code>select</code>è¯­å¥çš„æ‰§è¡Œï¼Œè€Œå¹¶ä¸ä¼šå¯¹å¤–å±‚çš„<code>for</code>è¯­å¥äº§ç”Ÿä½œç”¨ã€‚è¿™ç§é”™è¯¯çš„ç”¨æ³•å¯èƒ½ä¼šè®©è¿™ä¸ª<code>for</code>è¯­å¥æ— ä¼‘æ­¢åœ°è¿è¡Œä¸‹å»ã€‚</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚</p>
<pre><code>intChan := make(chan int, 1)
// ä¸€ç§’åå…³é—­é€šé“ã€‚
time.AfterFunc(time.Second, func() {
	close(intChan)
})
select {
case _, ok := &lt;-intChan:
	if !ok {
		fmt.Println(&quot;The candidate case is closed.&quot;)
		break
	}
	fmt.Println(&quot;The candidate case is selected.&quot;)
}
</code></pre>
<p>æˆ‘å…ˆå£°æ˜å¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªå«åš<code>intChan</code>çš„é€šé“ï¼Œç„¶åé€šè¿‡<code>time</code>åŒ…ä¸­çš„<code>AfterFunc</code>å‡½æ•°çº¦å®šåœ¨ä¸€ç§’é’Ÿä¹‹åå…³é—­è¯¥é€šé“ã€‚</p>
<p>åé¢çš„<code>select</code>è¯­å¥åªæœ‰ä¸€ä¸ªå€™é€‰åˆ†æ”¯ï¼Œæˆ‘åœ¨å…¶ä¸­åˆ©ç”¨æ¥æ”¶è¡¨è¾¾å¼çš„ç¬¬äºŒä¸ªç»“æœå€¼å¯¹<code>intChan</code>é€šé“æ˜¯å¦å·²å…³é—­åšäº†åˆ¤æ–­ï¼Œå¹¶åœ¨å¾—åˆ°è‚¯å®šç»“æœåï¼Œé€šè¿‡<code>break</code>è¯­å¥ç«‹å³ç»“æŸå½“å‰<code>select</code>è¯­å¥çš„æ‰§è¡Œã€‚</p>
<p>è¿™ä¸ªä¾‹å­ä»¥åŠå‰é¢é‚£ä¸ªä¾‹å­éƒ½å¯ä»¥åœ¨demo24.goæ–‡ä»¶ä¸­è¢«æ‰¾åˆ°ã€‚ä½ åº”è¯¥è¿è¡Œä¸‹ï¼Œçœ‹çœ‹ç»“æœå¦‚ä½•ã€‚</p>
<p>ä¸Šé¢è¿™äº›æ³¨æ„äº‹é¡¹ä¸­çš„ä¸€éƒ¨åˆ†æ¶‰åŠåˆ°äº†<code>select</code>è¯­å¥çš„åˆ†æ”¯é€‰æ‹©è§„åˆ™ã€‚æˆ‘è§‰å¾—å¾ˆæœ‰å¿…è¦å†ä¸“é—¨æ•´ç†å’Œæ€»ç»“ä¸€ä¸‹è¿™äº›è§„åˆ™ã€‚</p>
<p><strong>é—®é¢˜2ï¼š<code>select</code>è¯­å¥çš„åˆ†æ”¯é€‰æ‹©è§„åˆ™éƒ½æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p>è§„åˆ™å¦‚ä¸‹é¢æ‰€ç¤ºã€‚</p>
<ol>
<li>å¯¹äºæ¯ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼ï¼Œéƒ½è‡³å°‘ä¼šåŒ…å«ä¸€ä¸ªä»£è¡¨å‘é€æ“ä½œçš„å‘é€è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªä»£è¡¨æ¥æ”¶æ“ä½œçš„æ¥æ”¶è¡¨è¾¾å¼ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šåŒ…å«å…¶ä»–çš„è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œå¦‚æœ<code>case</code>è¡¨è¾¾å¼æ˜¯åŒ…å«äº†æ¥æ”¶è¡¨è¾¾å¼çš„çŸ­å˜é‡å£°æ˜æ—¶ï¼Œé‚£ä¹ˆåœ¨èµ‹å€¼ç¬¦å·å·¦è¾¹çš„å°±å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œä¸è¿‡æ­¤å¤„çš„è¡¨è¾¾å¼çš„ç»“æœå¿…é¡»æ˜¯å¯ä»¥è¢«èµ‹å€¼çš„ã€‚å½“è¿™æ ·çš„<code>case</code>è¡¨è¾¾å¼è¢«æ±‚å€¼æ—¶ï¼Œå®ƒåŒ…å«çš„å¤šä¸ªè¡¨è¾¾å¼æ€»ä¼šä»¥ä»å·¦åˆ°å³çš„é¡ºåºè¢«æ±‚å€¼ã€‚<br />
<br></li>
<li><code>select</code>è¯­å¥åŒ…å«çš„å€™é€‰åˆ†æ”¯ä¸­çš„<code>case</code>è¡¨è¾¾å¼éƒ½ä¼šåœ¨è¯¥è¯­å¥æ‰§è¡Œå¼€å§‹æ—¶å…ˆè¢«æ±‚å€¼ï¼Œå¹¶ä¸”æ±‚å€¼çš„é¡ºåºæ˜¯ä¾ä»ä»£ç ç¼–å†™çš„é¡ºåºä»ä¸Šåˆ°ä¸‹çš„ã€‚ç»“åˆä¸Šä¸€æ¡è§„åˆ™ï¼Œåœ¨<code>select</code>è¯­å¥å¼€å§‹æ‰§è¡Œæ—¶ï¼Œæ’åœ¨æœ€ä¸Šè¾¹çš„å€™é€‰åˆ†æ”¯ä¸­æœ€å·¦è¾¹çš„è¡¨è¾¾å¼ä¼šæœ€å…ˆè¢«æ±‚å€¼ï¼Œç„¶åæ˜¯å®ƒå³è¾¹çš„è¡¨è¾¾å¼ã€‚ä»…å½“æœ€ä¸Šè¾¹çš„å€™é€‰åˆ†æ”¯ä¸­çš„æ‰€æœ‰è¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œä»ä¸Šè¾¹æ•°ç¬¬äºŒä¸ªå€™é€‰åˆ†æ”¯ä¸­çš„è¡¨è¾¾å¼æ‰ä¼šè¢«æ±‚å€¼ï¼Œé¡ºåºåŒæ ·æ˜¯ä»å·¦åˆ°å³ï¼Œç„¶åæ˜¯ç¬¬ä¸‰ä¸ªå€™é€‰åˆ†æ”¯ã€ç¬¬å››ä¸ªå€™é€‰åˆ†æ”¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br />
<br></li>
<li>å¯¹äºæ¯ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼ï¼Œå¦‚æœå…¶ä¸­çš„å‘é€è¡¨è¾¾å¼æˆ–è€…æ¥æ”¶è¡¨è¾¾å¼åœ¨è¢«æ±‚å€¼æ—¶ï¼Œç›¸åº”çš„æ“ä½œæ­£å¤„äºé˜»å¡çŠ¶æ€ï¼Œé‚£ä¹ˆå¯¹è¯¥<code>case</code>è¡¨è¾¾å¼çš„æ±‚å€¼å°±æ˜¯ä¸æˆåŠŸçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼Œè¿™ä¸ª<code>case</code>è¡¨è¾¾å¼æ‰€åœ¨çš„å€™é€‰åˆ†æ”¯æ˜¯ä¸æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„ã€‚<br />
<br></li>
<li>ä»…å½“<code>select</code>è¯­å¥ä¸­çš„æ‰€æœ‰<code>case</code>è¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œå®ƒæ‰ä¼šå¼€å§‹é€‰æ‹©å€™é€‰åˆ†æ”¯ã€‚è¿™æ—¶å€™ï¼Œå®ƒåªä¼šæŒ‘é€‰æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„å€™é€‰åˆ†æ”¯æ‰§è¡Œã€‚å¦‚æœæ‰€æœ‰çš„å€™é€‰åˆ†æ”¯éƒ½ä¸æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆé»˜è®¤åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœè¿™æ—¶æ²¡æœ‰é»˜è®¤åˆ†æ”¯ï¼Œé‚£ä¹ˆ<code>select</code>è¯­å¥å°±ä¼šç«‹å³è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ä¸ºæ­¢ã€‚ä¸€æ—¦æœ‰ä¸€ä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œ<code>select</code>è¯­å¥ï¼ˆæˆ–è€…è¯´å®ƒæ‰€åœ¨çš„goroutineï¼‰å°±ä¼šè¢«å”¤é†’ï¼Œè¿™ä¸ªå€™é€‰åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚<br />
<br></li>
<li>å¦‚æœ<code>select</code>è¯­å¥å‘ç°åŒæ—¶æœ‰å¤šä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç”¨ä¸€ç§ä¼ªéšæœºçš„ç®—æ³•åœ¨è¿™äº›åˆ†æ”¯ä¸­é€‰æ‹©ä¸€ä¸ªå¹¶æ‰§è¡Œã€‚æ³¨æ„ï¼Œå³ä½¿<code>select</code>è¯­å¥æ˜¯åœ¨è¢«å”¤é†’æ—¶å‘ç°çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿä¼šè¿™æ ·åšã€‚<br />
<br></li>
<li>ä¸€æ¡<code>select</code>è¯­å¥ä¸­åªèƒ½å¤Ÿæœ‰ä¸€ä¸ªé»˜è®¤åˆ†æ”¯ã€‚å¹¶ä¸”ï¼Œé»˜è®¤åˆ†æ”¯åªåœ¨æ— å€™é€‰åˆ†æ”¯å¯é€‰æ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¸å®ƒçš„ç¼–å†™ä½ç½®æ— å…³ã€‚<br />
<br></li>
<li><code>select</code>è¯­å¥çš„æ¯æ¬¡æ‰§è¡Œï¼ŒåŒ…æ‹¬<code>case</code>è¡¨è¾¾å¼æ±‚å€¼å’Œåˆ†æ”¯é€‰æ‹©ï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ä¸è¿‡ï¼Œè‡³äºå®ƒçš„æ‰§è¡Œæ˜¯å¦æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œå°±è¦çœ‹å…¶ä¸­çš„<code>case</code>è¡¨è¾¾å¼ä»¥åŠåˆ†æ”¯ä¸­ï¼Œæ˜¯å¦åŒ…å«å¹¶å‘ä¸å®‰å…¨çš„ä»£ç äº†ã€‚</li>
</ol>
<p>æˆ‘æŠŠä¸ä»¥ä¸Šè§„åˆ™ç›¸å…³çš„ç¤ºä¾‹æ”¾åœ¨demo25.goæ–‡ä»¶ä¸­äº†ã€‚ä½ ä¸€å®šè¦å»è¯•è¿è¡Œä¸€ä¸‹ï¼Œç„¶åå°è¯•ç”¨ä¸Šé¢çš„è§„åˆ™å»è§£é‡Šå®ƒçš„è¾“å‡ºå†…å®¹ã€‚</p>
<p><strong>æ€»ç»“</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å…ˆè®²äº†å•å‘é€šé“çš„è¡¨ç¤ºæ–¹æ³•ï¼Œæ“ä½œç¬¦â€œ<code>&lt;-</code>â€ä»ç„¶æ˜¯å…³é”®ã€‚å¦‚æœåªç”¨ä¸€ä¸ªè¯æ¥æ¦‚æ‹¬å•å‘é€šé“å­˜åœ¨çš„æ„ä¹‰çš„è¯ï¼Œé‚£å°±æ˜¯â€œçº¦æŸâ€ï¼Œä¹Ÿå°±æ˜¯å¯¹ä»£ç çš„çº¦æŸã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦<code>range</code>å­å¥çš„<code>for</code>è¯­å¥ä»é€šé“ä¸­è·å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>select</code>è¯­å¥æ“çºµé€šé“ã€‚</p>
<p><code>select</code>è¯­å¥æ˜¯ä¸“é—¨ä¸ºé€šé“è€Œè®¾è®¡çš„ï¼Œå®ƒå¯ä»¥åŒ…å«è‹¥å¹²ä¸ªå€™é€‰åˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯ä¸­çš„<code>case</code>è¡¨è¾¾å¼éƒ½ä¼šåŒ…å«é’ˆå¯¹æŸä¸ªé€šé“çš„å‘é€æˆ–æ¥æ”¶æ“ä½œã€‚</p>
<p>å½“<code>select</code>è¯­å¥è¢«æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šæ ¹æ®ä¸€å¥—<strong>åˆ†æ”¯é€‰æ‹©è§„åˆ™</strong>é€‰ä¸­æŸä¸€ä¸ªåˆ†æ”¯å¹¶æ‰§è¡Œå…¶ä¸­çš„ä»£ç ã€‚å¦‚æœæ‰€æœ‰çš„å€™é€‰åˆ†æ”¯éƒ½æ²¡æœ‰è¢«é€‰ä¸­ï¼Œé‚£ä¹ˆé»˜è®¤åˆ†æ”¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å°±ä¼šè¢«æ‰§è¡Œã€‚æ³¨æ„ï¼Œå‘é€å’Œæ¥æ”¶æ“ä½œçš„é˜»å¡æ˜¯åˆ†æ”¯é€‰æ‹©è§„åˆ™çš„ä¸€ä¸ªå¾ˆé‡è¦çš„ä¾æ®ã€‚</p>
<p><strong>æ€è€ƒé¢˜</strong></p>
<p>ä»Šå¤©çš„æ€è€ƒé¢˜éƒ½ç”±ä¸Šè¿°å†…å®¹ä¸­çš„çº¿ç´¢å»¶ä¼¸è€Œæ¥ã€‚</p>
<ol>
<li>å¦‚æœåœ¨<code>select</code>è¯­å¥ä¸­å‘ç°æŸä¸ªé€šé“å·²å…³é—­ï¼Œé‚£ä¹ˆåº”è¯¥æ€æ ·å±è”½æ‰å®ƒæ‰€åœ¨çš„åˆ†æ”¯ï¼Ÿ</li>
<li>åœ¨<code>select</code>è¯­å¥ä¸<code>for</code>è¯­å¥è”ç”¨æ—¶ï¼Œæ€æ ·ç›´æ¥é€€å‡ºå¤–å±‚çš„<code>for</code>è¯­å¥ï¼Ÿ</li>
</ol>
<p><a href="https://github.com/hyper0x/Golang_Puzzlers">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p>
<p><img src="https://static001.geekbang.org/resource/image/35/48/358e4e8578a706598e18a7dfed3ed648.jpg" alt="" /></p>

                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/21/b8/aca814dd.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ±Ÿå±±å¦‚ç”»</span>
                            </div>
                            <div class="bd">æ„Ÿè§‰æ–¹æ³•åº”è¯¥æŒºå¤šï¼Œå°±çœ‹è§£å†³çš„æ˜¯ä¸æ˜¯ä¼˜é›…<br><br>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå‘ç°æŸä¸ªchannelè¢«å…³é—­åï¼Œä¸ºäº†é˜²æ­¢å†æ¬¡è¿›å…¥è¿™ä¸ªåˆ†æ”¯ï¼Œå¯ä»¥æŠŠè¿™ä¸ªchannelé‡æ–°èµ‹å€¼æˆä¸ºä¸€ä¸ªé•¿åº¦ä¸º0çš„éç¼“å†²é€šé“ï¼Œè¿™æ ·è¿™ä¸ªcaseå°±ä¸€ç›´è¢«é˜»å¡äº†ï¼š<br>for {<br>		select {<br>		case _, ok := &lt;-ch1:<br>			if !ok {<br>				ch1 = make(chan int)<br>			}<br>		case ..... :<br>			&#47;&#47;&#47;&#47;<br>		default:<br>			&#47;&#47;&#47;&#47;	<br>		}<br>	}<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šå¯ä»¥ç”¨ breakå’Œæ ‡ç­¾é…åˆä½¿ç”¨ï¼Œç›´æ¥breakå‡ºæŒ‡å®šçš„å¾ªç¯ä½“ï¼Œæˆ–è€…gotoè¯­å¥ç›´æ¥è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾æ‰§è¡Œ<br><br>breaké…åˆæ ‡ç­¾ï¼š<br><br>ch1 := make(chan int, 1)<br>	time.AfterFunc(time.Second, func() { close(ch1) })<br>loop:<br>	for {<br>		select {<br>		case _, ok := &lt;-ch1:<br>			if !ok {<br>				break loop<br>			}<br>			fmt.Println(&quot;ch1&quot;)<br>		}<br>	}<br>	fmt.Println(&quot;END&quot;)<br><br>gotoé…åˆæ ‡ç­¾ï¼š<br><br>ch1 := make(chan int, 1)<br>	time.AfterFunc(time.Second, func() { close(ch1) })<br>	for {<br>		select {<br>		case _, ok := &lt;-ch1:<br>			if !ok {<br>				goto loop<br>			}<br>			fmt.Println(&quot;ch1&quot;)<br>		}<br>	}<br>loop:<br>	fmt.Println(&quot;END&quot;) <br></div>
                            <span class="time">2018-09-05 09:12</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/57/27/805786be.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç¬¨ç¬¨</span>
                            </div>
                            <div class="bd">è°¢è°¢èµ«è€å¸ˆä»Šæ—¥åˆ†äº«ï¼Œå›ç­”é—®é¢˜å¦‚ä¸‹<br>1.å¯¹äºselectä¸­è¢«closeçš„channelåˆ¤æ–­å…¶ç¬¬äºŒä¸ªbooleanå‚æ•°ï¼Œå¦‚æœæ˜¯falseåˆ™è¢«å…³é—­ï¼Œé‚£ä¹ˆèµ‹å€¼æ­¤channelä¸ºnilï¼Œé‚£ä¹ˆæ¯æ¬¡åˆ°è¿™ä¸ªnilçš„channelå°±ä¼šé˜»å¡ï¼Œselectä¼šå¿½ç•¥é˜»å¡çš„é€šé“ï¼Œå¦‚æœå†æ­é…ä¸Šdefaultå°±ä¸€å®šèƒ½ä¿è¯ä¸ä¼šè¢«é˜»å¡äº†ã€‚<br>2.é€šè¿‡å®šä¹‰æ ‡ç­¾ï¼Œé…åˆgotoæˆ–è€…breakèƒ½å®ç°åœ¨åŒä¸€ä¸ªå‡½æ•°å†…ä»»æ„è·³è½¬ï¼Œæ•…å¯ä»¥è·³å‡ºå¤šå±‚åµŒå¥—çš„å¾ªç¯ã€‚ <br></div>
                            <span class="time">2018-09-05 11:05</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</p>
                                <p class="reply-time">2018-09-06 14:39</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/75/6f/8a6e0a14.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ä»»æ€§ğŸ˜€</span>
                            </div>
                            <div class="bd">demo24é‡Œè¾¹å°‘äº†rand.Seed(time.Now().Unix())ï¼Œä¸ç„¶æ¯æ¬¡éšæœºæ•°éƒ½æ˜¯å›ºå®šçš„é¡ºåº <br></div>
                            <span class="time">2018-09-25 17:59</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/01/be/be358cab.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Kennedy</span>
                            </div>
                            <div class="bd">é€šé“çš„ç±»å‹å¦‚æœæ˜¯æ–¹æ³•ï¼Œæ€§èƒ½ä¼šå·®å—ï¼Ÿ <br></div>
                            <span class="time">2018-09-10 08:25</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/dd/d0/36b6eaf7.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è®¸æ£®æ£®</span>
                            </div>
                            <div class="bd">1 å‘ç°channelæ˜¯closedä¹‹åï¼Œé‡æ–°makeï¼Œä½¿å¾—ä¸ºnilï¼Œä¿è¯ä¸€ç›´ é˜»å¡ã€‚<br><br>		i := 0<br>		for {<br>			select {<br>			case _, ok := &lt;-c:<br>				if !ok {<br>					c = make(chan bool)<br>					fmt.Println(&quot;!ok&quot;)<br>				} else {<br>					fmt.Println(&quot;c:&quot;, c)<br>				}<br>			default:<br>				time.Sleep(1e9) &#47;&#47; ç­‰å¾…1ç§’é’Ÿ<br>				fmt.Println(&quot;default, &quot;, i)<br>				i = i + 1<br>				if i &gt; 3 {<br>					return<br>				}<br>			}<br>		}<br>2 <br>return ç›´æ¥é€€å‡ºç¨‹åº<br>break loop &#47;&#47; ç»“åˆloopï¼Œä¼šé€€å‡ºforå¾ªç¯<br>goto end &#47;&#47;ç»“åˆendï¼Œè·³è½¬<br><br>	&#47;&#47;åœ¨selectè¯­å¥ä¸forè¯­å¥è”ç”¨æ—¶ï¼Œæ€æ ·ç›´æ¥é€€å‡ºå¤–å±‚çš„forè¯­å¥?<br>	tick := time.Tick(100 * time.Millisecond)<br>	boom := time.After(500 * time.Millisecond)<br>	&#47;&#47;loop:<br>	for {<br>		select {<br>		case &lt;-tick:<br>			fmt.Println(&quot;tick.&quot;)<br>		case &lt;-boom:<br>			fmt.Println(&quot;BOOM!&quot;)<br>			&#47;&#47; return  &#47;&#47;ç›´æ¥é€€å‡ºç¨‹åº<br>			&#47;&#47;break loop &#47;&#47; ç»“åˆloopï¼Œä¼šé€€å‡ºforå¾ªç¯<br>			goto end &#47;&#47;ç»“åˆend<br>		default:<br>			fmt.Println(&quot;    .&quot;)<br>			time.Sleep(50 * time.Millisecond)<br>		}<br>	}<br><br>end:<br>	fmt.Println(&quot;END...&quot;)<br> <br></div>
                            <span class="time">2018-09-14 00:25</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/12/7b/5da66a2f.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å•µå•µ</span>
                            </div>
                            <div class="bd">ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœåˆ¤æ–­åˆ°chanå…³é—­ï¼Œå³å–åˆ°çš„ç¬¬äºŒä¸ªå€¼ä¸ºfalseã€‚åˆ™å°†è¯¥chanèµ‹å€¼ä¸ºnilã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ ¹æ®æƒ…å†µä½¿ç”¨gotoæˆ–è€…returnã€‚æˆ–è€…åŠ ä¸€ä¸ªæ˜¯å¦ç»“æŸçš„æ ‡è¯†ï¼Œgotoç„¶åç”¨ä¸¤ä¸ªbreakã€‚ <br></div>
                            <span class="time">2018-09-11 08:21</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/65/42/76eb78bd.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">heha37</span>
                            </div>
                            <div class="bd">å½“ç¬¬äºŒä¸ªbooleanå‚æ•°ä¸ºfalseçš„æ—¶å€™ï¼Œåœ¨ç›¸åº”çš„caseä¸­è®¾ç½®chanä¸ºnilé›¶å€¼ï¼Œå†æ¬¡caseæ±‚å€¼çš„æ—¶å€™ä¼šé­é‡é˜»å¡ï¼Œä¼šå±è”½è¯¥caseã€‚ <br></div>
                            <span class="time">2018-11-05 17:34</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ˜¯çš„ã€‚</p>
                                <p class="reply-time">2018-11-06 13:04</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/33/7a/ac307bfc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åˆ°ä¸äº†çš„å¡”</span>
                            </div>
                            <div class="bd">éƒè€å¸ˆï¼Œè¯·é—®ç¬¬ä¸€é¢˜çš„ç­”æ¡ˆæ˜¯å•¥ï¼Œä¸çŸ¥é“æ€ä¹ˆå±è”½åˆ†æ”¯å‘¢ <br></div>
                            <span class="time">2018-10-24 08:47</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è®¾ç½®ä¸ºnilå°±å¯ä»¥äº†ã€‚</p>
                                <p class="reply-time">2018-11-06 13:35</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ä¸€æ­¥</span>
                            </div>
                            <div class="bd">è€å¸ˆä½ ä¸Šé¢çš„å‘é€é€šé“&lt;-æ˜¯ä»£è¡¨ï¼Œå¯ä»¥å‘é€šé“ä¸­å‘é€æ•°æ®å‘¢ï¼Ÿé‚£å¯¹äºé€šé“è€Œè¨€æ˜¯ä¸æ˜¯å°±æ˜¯ï¼Œé€šé“æ¥æ”¶æ•°æ®ï¼Œå«åšæ¥æ”¶é€šé“? <br></div>
                            <span class="time">2018-09-14 19:45</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">åªèƒ½å‘å®ƒå‘é€æ•°æ®çš„æˆ‘ç®€ç§°ä¸ºå‘é€é€šé“ã€‚</p>
                                <p class="reply-time">2018-09-15 09:27</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/54/6d/c947ef55.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Neo</span>
                            </div>
                            <div class="bd">è¯·é—®è€å¸ˆï¼š <br>select åˆ†æ”¯é€‰æ‹©è§„åˆ™ä¸­ç¬¬5ä¸ªï¼š&quot;å¦‚æœselectè¯­å¥å‘ç°åŒæ—¶æœ‰å¤šä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç”¨ä¸€ç§ä¼ªéšæœºç®—æ³•åœ¨è¿™äº›åˆ†æ”¯ä¸­é€‰æ‹©ä¸€ä¸ªæ‰§è¡Œ&quot;   éšæœºé€‰ä¸€ä¸ªæ‰§è¡Œ é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å°±ä¸èƒ½ç¡®å®šç¨‹åºä¼šæ‰§è¡Œå“ªä¸€æ¡ä¸è¯­å¥äº†ï¼Ÿ<br><br> <br></div>
                            <span class="time">2018-09-12 23:42</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¿™ç§æƒ…å†µä¸‹æ˜¯è¿™æ ·ã€‚</p>
                                <p class="reply-time">2018-09-15 09:40</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/95/ff/033caa38.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">michael</span>
                            </div>
                            <div class="bd">ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†for selectå†™åˆ°ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç”¨returnçš„æ–¹å¼æ¥è·³å‡ºforå¾ªç¯ <br></div>
                            <span class="time">2018-09-09 00:59</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/cb/67/5a3f9ae8.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç‹è…¾é£</span>
                            </div>
                            <div class="bd">å¦‚ä½•åŠ¨æ€çš„è°ƒæ•´selectçš„channelï¼Œæ¯”å¦‚æˆ‘èƒ½å¦selectä¸€ä¸ªchannelåˆ‡ç‰‡ï¼Œç„¶åæ ¹æ®éœ€è¦è°ƒæ•´åˆ‡ç‰‡çš„å†…å®¹ï¼Ÿ <br></div>
                            <span class="time">2018-09-08 07:35</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">åˆ‡ç‰‡ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹æœ€å¥½ä¸è¦ç”¨ã€‚</p>
                                <p class="reply-time">2018-09-08 13:49</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å†°æ¿€å‡Œçš„çœ¼æ³ª</span>
                            </div>
                            <div class="bd">å•å‘é€šé“ä¹çœ‹æ²¡ä»€ä¹ˆä½œç”¨ï¼Œä½†æ˜¯çœ‹äº†åé¢æ–‡ç« ï¼Œçœ‹åˆ°åœ¨å‡½æ•°ä¼ å‚ã€è¿”å›æ—¶å¯ä»¥é€šè¿‡åŒå‘é€šé“çš„é€€åŒ–å½¢æˆå•å‘é€šé“ï¼Œå°±æ˜ç™½ä½œè€…è¯´çš„çº¦æŸè¡Œä¸ºçš„æ„ä¹‰äº†ã€‚ <br></div>
                            <span class="time">2018-09-07 09:09</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æœ‰é“­</span>
                            </div>
                            <div class="bd">æˆ‘æ„Ÿè§‰é‚£ä¸ªåªå‘ä¸æ”¶å’Œåªæ”¶ä¸å‘çš„é€šé“ï¼Œè¿˜æ˜¯æ²¡å•¥ç”¨å•Š <br></div>
                            <span class="time">2018-09-06 09:16</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è®¾è®¡APIçš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚</p>
                                <p class="reply-time">2018-09-06 14:34</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/88/d5/1e8fccab.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç™«ç‹‚çš„å°å…µ</span>
                            </div>
                            <div class="bd">è¯·é—®å½“selectè¯­å¥å‘ç°å¤šä¸ªåˆ†æ”¯æ»¡è¶³æ¡ä»¶æ—¶éšæœºé€‰æ‹©ä¸€ä¸ªåˆ†æ”¯æ‰§è¡Œ é‚£æ€æ ·è®©å…¶ä»–æ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯æ‰§è¡Œå‘¢ï¼Ÿ for å¾ªç¯ ç­‰å¾…ä¸‹ä¸€æ¬¡å¾ªç¯æ—¶å†æ‰§è¡Œï¼Ÿ  <br></div>
                            <span class="time">2018-09-05 11:50</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ”¾åœ¨forå¾ªç¯é‡Œæ¯æ¬¡ä¹Ÿæ˜¯éšæœºçš„ï¼Œä¸è¿‡å¯ä»¥ç”¨forå¾ªç¯ï¼Œæˆ–è€…å†æ¬¡æ‰§è¡Œselectè¯­å¥ã€‚</p>
                                <p class="reply-time">2018-09-06 14:38</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/33/7a/ac307bfc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åˆ°ä¸äº†çš„å¡”</span>
                            </div>
                            <div class="bd">selectæœ‰ä¸€ä¸ªåˆ†æ”¯è¢«å”¤é†’åï¼Œä¼šæœ‰å¤šé•¿çš„æ—¶é—´ç»§ç»­ç›‘å¬å…¶ä»–åˆ†æ”¯çš„å”¤é†’ï¼Œç„¶ååœ¨æ‰§è¡Œcaseåˆ†æ”¯ã€‚<br>intChannels := [3]chan int{<br>		make(chan int, 1),<br>		make(chan int, 1),<br>		make(chan int, 1),<br>	}<br><br>	time.AfterFunc(5, func() {<br>		intChannels[1] &lt;- 1<br>	})<br>	time.AfterFunc(5000, func() {   &#47;&#47;æ—¶é—´ä¸º500æ—¶ï¼Œå°±å˜ä¸ºäº†intChannels[2]è¢«å”¤é†’äº†<br>		intChannels[2] &lt;- 2<br>	})<br>	select {<br>	case &lt;-intChannels[0]:<br>		fmt.Println(&quot;The first channel is ready&quot;)<br>	case &lt;-intChannels[1]:<br>		fmt.Println(&quot;The second channel is ready &quot;)<br>	case &lt;-intChannels[2]:<br>		fmt.Println(&quot;The third channel is ready&quot;)<br>	} <br></div>
                            <span class="time">2018-10-24 09:02</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/4c/0c/12b70610.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æˆ‘ç›¼ä¹™å¯</span>
                            </div>
                            <div class="bd">è€å¸ˆä½ å¥½ï¼Œè¿™èŠ‚è¯¾ï¼Œè¿˜æ²¡çœ‹ä½†æ˜¯ä¹°äº†ä½ çš„GOå¹¶å‘ç¼–ç¨‹ï¼Œå€Ÿå®åœ°é—®è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œç¬¬å››ç« çš„loadgenä»£ç é‡Œï¼Œæœ‰ä¸€ä¸ªå‡½æ•°å¦‚ä¸‹ï¼š<br>&#47;&#47; genLoad ä¼šå‘ç”Ÿè½½è·å¹¶å‘æ‰¿å—æ–¹å‘é€ã€‚<br>func (gen *myGenerator) genLoad(throttle &lt;-chan time.Time) {<br>	for {<br>		select {<br>		case &lt;- gen.ctx.Done():<br>			gen.prepareToStop(gen.ctx.Err())<br>			return<br>		default:<br>		}<br><br>		gen.asyncCall()<br><br>		if gen.lps &gt; 0 {<br>			select {<br>				case&lt;-throttle:<br>				case&lt;-gen.ctx.Done():<br>					gen.prepareToStop(gen.ctx.Err())<br>					return<br>				default:<br>					&#47;&#47;fmt.Println(&quot;DD&quot;)<br>			}<br>		}<br>	}<br>}<br><br>æœ€åè¿™ä¸ªdefaultï¼š<br>æœ¬æ¥åœ¨è€å¸ˆçš„ä»£ç é‡Œæ²¡æœ‰ï¼Œæˆ‘æ— æ„ä¸­åŠ ä¸Šäº†ã€‚<br>ç»“æœåŠ ä¸åŠ è¿™ä¸ªdefaultï¼šæ‰§è¡Œçš„ç»“æœå®Œå…¨æ˜¯ä¸¤ä¸ªï¼Œå¤©å·®åœ°åˆ«ï¼Œè€å¸ˆå¦‚æœæœ‰æ—¶é—´ï¼Œè¯·åœ¨è¿™é‡ŒåŠ ä¸Šè¿™ä¸€è¡Œä»£ç default: testä¸€ä¸‹ï¼Œæœ¬æ¥æ˜¯success 5000å¤šä¸ªï¼Œç»“æœåŠ ä¸Šä¹‹åï¼Œcall error 1000ï¼Œsuccuess 40000å¤šï¼Œtimeout2000å¤šï¼Œå®åœ¨ä¸æ˜ç™½ä¸ºä½•ä¼šè¿™æ ·ï¼Œè°¢è°¢è€å¸ˆã€‚ <br></div>
                            <span class="time">2018-10-23 12:35</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/46/5b/dd4be9de.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">èœ—ç‰›</span>
                            </div>
                            <div class="bd">func main() {<br>	ch1 := make(chan int64, 3)<br>	ch1 &lt;- 100<br><br>	ch2 := make(chan int64, 3)<br>	close(ch2)<br><br>	for {<br>		select {<br>		case v1 := &lt;-ch1:<br>			fmt.Println(v1)<br>		case _, isOpen := &lt;-ch2:<br>			if !isOpen {<br>				ch2 = nil<br>			}<br>		default:<br>			goto next<br>		}<br>	}<br><br>next:<br>	fmt.Println(&quot;The Programe is over&quot;)<br>} <br></div>
                            <span class="time">2018-09-15 15:31</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/44/3e/8f13b074.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Gavin</span>
                            </div>
                            <div class="bd">å•å‘é€šé“å¯ä»¥å®ç°äº‹ä»¶ç›‘å¬ <br></div>
                            <span class="time">2018-09-12 09:36</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/52/78/4365471c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Forever</span>
                            </div>
                            <div class="bd">è€å¸ˆè¯·é—®å¦‚æœæˆ‘æ˜¯100ä¸ªç®¡é“å¹¶è¡Œè¯»å…¥1äº¿çš„æ•°å­— ç„¶å100ä¸ªç®¡é“åˆ†åˆ«å»è°ƒç”¨åˆ¤æ–­æ•°å­—æ˜¯å¦æ˜¯è´¨æ•°çš„å‡½æ•° ç„¶åæœ¬æ¥è¿è¡Œç€å¥½å¥½çš„cpuå ç”¨ç‡åˆ°äº†99  åæ¥çªç„¶ä¸å†è¿ç®—äº† cpuä¹Ÿç›´æ¥å ç”¨ç‡éª¤é™åˆ°5% ä½†æ˜¯ç¨‹åºæ²¡æœ‰æŠ¥é”™è€Œæ˜¯æš‚åœä¸åŠ¨ è¯·é—®è€å¸ˆæ˜¯ä»€ä¹ˆåŸå›  <br></div>
                            <span class="time">2018-09-10 21:47</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>