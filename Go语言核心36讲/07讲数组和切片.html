<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.5;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">更多课程请加QQ1046877154，微信loveu_110获取</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                07讲数组和切片
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/dd/1b/dd325dbcedf291bb9272695d5856981b.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <h3>【Go语言代码较多，建议配合文章收听音频。】</h3><br></br><p>从本篇文章开始，我们正式进入了模块2的学习。在这之前，我们已经聊了很多的Go语言和编程方面的基础知识，相信你已经对Go语言的开发环境配置、常用源码文件写法，以及程序实体（尤其是变量）及其相关的各种概念和编程技巧（比如类型推断、变量重声明、可重名变量、类型断言、类型转换、别名类型和潜在类型等）都有了一定的理解。</p><p>它们都是我认为的Go语言编程基础中比较重要的部分，同时也是后续文章的基石。如果你在后面的学习过程中感觉有些吃力，那可能是基础仍未牢固，可以再回去复习一下。</p><hr></hr><p>我们这次主要讨论Go语言的数组（array）类型和切片（slice）类型。数组和切片有时候会让初学者感到困惑。</p><p>它们的共同点是都属于集合类的类型，并且，它们的值也都可以用来存储某一种类型的值（或者说元素）。</p><p>不过，它们最重要的不同是：<strong>数组类型的值（以下简称数组）的长度是固定的，而切片类型的值（以下简称切片）是可变长的。</strong></p><p>数组的长度在声明它的时候就必须给定，并且之后不会再改变。可以说，数组的长度是其类型的一部分。比如，<code>[1]string</code>和<code>[2]string</code>就是两个不同的数组类型。</p><p>而切片的类型字面量中只有元素的类型，而没有长度。切片的长度可以自动地随着其中元素数量的增长而增长，但不会随着元素数量的减少而减小。</p><!-- [[[read_end]]] --><p><img src="https://static001.geekbang.org/resource/image/ed/6c/edb5acaf595673e083cdcf1ea7bb966c.png" alt=""></p><p>（数组与切片的字面量）</p><p>我们其实可以把切片看做是对数组的一层简单的封装，因为在每个切片的底层数据结构中，一定会包含一个数组。数组可以被叫做切片的底层数组，而切片也可以被看作是对数组的某个连续片段的引用。</p><blockquote>
<p><span class="reference">也正因为如此，Go语言的切片类型属于引用类型，同属引用类型的还有字典类型、通道类型、函数类型等；而Go语言的数组类型则属于值类型，同属值类型的有基础数据类型以及结构体类型。</span></p>
<p><span class="reference">注意，Go语言里不存在像Java等编程语言中令人困惑的“传值或传引用”问题。在Go语言中，我们判断所谓的“传值”或者“传引用”只要看被传递的值的类型就好了。</span></p>
<p><span class="reference">如果传递的值是引用类型的，那么就是“传引用”。如果传递的值是值类型的，那么就是“传值”。从传递成本的角度讲，引用类型的值往往要比值类型的值低很多。</span></p>
<p><span class="reference">我们在数组和切片之上都可以应用索引表达式，得到的都会是某个元素。我们在它们之上也都可以应用切片表达式，也都会得到一个新的切片。</span></p>
</blockquote><p>我们通过调用内建函数<code>len</code>，得到数组和切片的长度。通过调用内建函数<code>cap</code>，我们可以得到它们的容量。</p><p>但要注意，数组的容量永远等于其长度，都是不可变的。切片的容量却不是这样，并且它的变化是有规律可寻的。</p><p>下面我们就通过一道题来了解一下。<strong>我们今天的问题就是：怎样正确估算切片的长度和容量？</strong></p><p>为此，我编写了一个简单的命令源码文件demo15.go。</p><pre><code>package main

import &quot;fmt&quot;

func main() {
	// 示例1。
	s1 := make([]int, 5)
	fmt.Printf(&quot;The length of s1: %d\n&quot;, len(s1))
	fmt.Printf(&quot;The capacity of s1: %d\n&quot;, cap(s1))
	fmt.Printf(&quot;The value of s1: %d\n&quot;, s1)
	s2 := make([]int, 5, 8)
	fmt.Printf(&quot;The length of s2: %d\n&quot;, len(s2))
	fmt.Printf(&quot;The capacity of s2: %d\n&quot;, cap(s2))
	fmt.Printf(&quot;The value of s2: %d\n&quot;, s2)
}
</code></pre><p>我描述一下它所做的事情。</p><p>首先，我用内建函数<code>make</code>声明了一个<code>[]int</code>类型的变量<code>s1</code>。我传给<code>make</code>函数的第二个参数是<code>5</code>，从而指明了该切片的长度。我用几乎同样的方式声明了切片<code>s2</code>，只不过多传入了一个参数<code>8</code>以指明该切片的容量。</p><p>现在，具体的问题是：切片<code>s1</code>和<code>s2</code>的容量都是多少？</p><p>这道题的典型回答：切片<code>s1</code>和<code>s2</code>的容量分别是<code>5</code>和<code>8</code>。</p><h2>问题解析</h2><p>解析一下这道题。<code>s1</code>的容量为什么是<code>5</code>呢？因为我在声明<code>s1</code>的时候把它的长度设置成了<code>5</code>。当我们用<code>make</code>函数初始化切片时，如果不指明其容量，那么它就会和长度一致。如果在初始化时指明了容量，那么切片的实际容量也就是它了。这也正是<code>s2</code>的容量是<code>8</code>的原因。</p><p>我们顺便通过<code>s2</code>再来明确下长度、容量以及它们的关系。我在初始化<code>s2</code>代表的切片时，同时也指定了它的长度和容量。</p><p>我在刚才说过，可以把切片看做是对数组的一层简单的封装，因为在每个切片的底层数据结构中，一定会包含一个数组。数组可以被叫做切片的底层数组，而切片也可以被看作是对数组的某个连续片段的引用。</p><p>在这种情况下，切片的容量实际上代表了它的底层数组的长度，这里是<code>8</code>。（注意，切片的底层数组等同于我们前面讲到的数组，其长度不可变。）</p><p>现在你需要跟着我一起想象：<strong>有一个窗口，你可以通过这个窗口看到一个数组，但是不一定能看到该数组中的所有元素，有时候只能看到连续的一部分元素。</strong></p><p>现在，这个数组就是切片<code>s2</code>的底层数组，而这个窗口就是切片<code>s2</code>本身。<code>s2</code>的长度实际上指明的就是这个窗口的宽度，决定了你透过<code>s2</code>，可以看到其底层数组中的哪几个连续的元素。</p><p>由于<code>s2</code>的长度是<code>5</code>，所以你可以看到底层数组中的第1个元素到第5个元素，对应的底层数组的索引范围是[0, 4]。</p><p>切片代表的窗口也会被划分成一个一个的小格子，就像我们家里的窗户那样。每个小格子都对应着其底层数组中的某一个元素。</p><p>我们继续拿<code>s2</code>为例，这个窗口最左边的那个小格子对应的正好是其底层数组中的第一个元素，即索引为<code>0</code>的那个元素。因此可以说，<code>s2</code>中的索引从<code>0</code>到<code>4</code>所指向的元素恰恰就是其底层数组中索引从<code>0</code>到<code>4</code>代表的那5个元素。</p><p>请记住，当我们用<code>make</code>函数或切片值字面量（比如<code>[]int{1, 2, 3}</code>）初始化一个切片时，该窗口最左边的那个小格子总是会对应其底层数组中的第1个元素。</p><p>但是当我们通过切片表达式基于某个数组或切片生成新切片的时候，情况就变得复杂起来了。</p><p><strong>我们再来看一个例子：</strong></p><pre><code>s3 := []int{1, 2, 3, 4, 5, 6, 7, 8}
s4 := s3[3:6]
fmt.Printf(&quot;The length of s4: %d\n&quot;, len(s4))
fmt.Printf(&quot;The capacity of s4: %d\n&quot;, cap(s4))
fmt.Printf(&quot;The value of s4: %d\n&quot;, s4)
</code></pre><p>切片<code>s3</code>中有8个元素，分别是从<code>1</code>到<code>8</code>的整数。<code>s3</code>的长度和容量都是<code>8</code>。然后，我用切片表达式<code>s3[3:6]</code>初始化了切片<code>s4</code>。问题是，这个<code>s4</code>的长度和容量分别是多少？</p><p>这并不难，用减法就可以搞定。首先你要知道，切片表达式中的方括号里的那两个整数都代表什么。我换一种表达方式你也许就清楚了，即：[3, 6)。</p><p>这是数学中的区间表示法，常用于表示取值范围，我其实已经在本专栏用过好几次了。由此可知，<code>[3:6]</code>要表达的就是透过新窗口能看到的<code>s3</code>中元素的索引范围是从<code>3</code>到<code>5</code>（注意，不包括<code>6</code>）。</p><p>这里的<code>3</code>可被称为起始索引，<code>6</code>可被称为结束索引。那么<code>s4</code>的长度就是<code>6</code>减去<code>3</code>，即<code>3</code>。因此可以说，<code>s4</code>中的索引从<code>0</code>到<code>2</code>指向的元素对应的是<code>s3</code>及其底层数组中索引从<code>3</code>到<code>5</code>的那3个元素。</p><p><img src="https://static001.geekbang.org/resource/image/96/55/96e2c7129793ee5e73a574ef8f3ad755.png" alt=""></p><p>（切片与数组的关系）</p><p>再来看容量。我在前面说过，切片的容量代表了它的底层数组的长度，但这仅限于使用<code>make</code>函数或者切片值字面量初始化切片的情况。</p><p>更通用的规则是：一个切片的容量可以被看作是透过这个窗口最多可以看到的底层数组中元素的个数。</p><p>由于<code>s4</code>是通过在<code>s3</code>上施加切片操作得来的，所以<code>s3</code>的底层数组就是<code>s4</code>的底层数组。</p><p>又因为，在底层数组不变的情况下，切片代表的窗口可以向右扩展，直至其底层数组的末尾。</p><p>所以，<code>s4</code>的容量就是其底层数组的长度<code>8</code>,减去上述切片表达式中的那个起始索引<code>3</code>，即<code>5</code>。</p><p>注意，切片代表的窗口是无法向左扩展的。也就是说，我们永远无法透过<code>s4</code>看到<code>s3</code>中最左边的那3个元素。</p><p>最后，顺便提一下把切片的窗口向右扩展到最大的方法。对于<code>s4</code>来说，切片表达式<code>s4[0:cap(s4)]</code>就可以做到。我想你应该能看懂。该表达式的结果值（即一个新的切片）会是<code>[]int{4, 5, 6, 7, 8}</code>，其长度和容量都是<code>5</code>。</p><h2>知识扩展</h2><p><strong>问题1：怎样估算切片容量的增长？</strong></p><p>一旦一个切片无法容纳更多的元素，Go语言就会想办法扩容。但它并不会改变原来的切片，而是会生成一个容量更大的切片，然后将把原有的元素和新元素一并拷贝到新切片中。在一般的情况下，你可以简单地认为新切片的容量（以下简称新容量）将会是原切片容量（以下简称原容量）的2倍。</p><p>但是，当原切片的长度（以下简称原长度）大于或等于<code>1024</code>时，Go语言将会以原容量的<code>1.25</code>倍作为新容量的基准（以下新容量基准）。新容量基准会被调整（不断地与<code>1.25</code>相乘），直到结果不小于原长度与要追加的元素数量之和（以下简称新长度）。最终，新容量往往会比新长度大一些，当然，相等也是可能的。</p><p>另外，如果我们一次追加的元素过多，以至于使新长度比原容量的2倍还要大，那么新容量就会以新长度为基准。注意，与前面那种情况一样，最终的新容量在很多时候都要比新容量基准更大一些。更多细节可参见<code>runtime</code>包中slice.go文件里的<code>growslice</code>及相关函数的具体实现。</p><p>我把展示上述扩容策略的一些例子都放到了demo16.go文件中。你可以去试运行看看。</p><p><strong>问题 2：切片的底层数组什么时候会被替换？</strong></p><p>确切地说，一个切片的底层数组永远不会被替换。为什么？虽然在扩容的时候Go语言一定会生成新的底层数组，但是它也同时生成了新的切片。</p><p>它只是把新的切片作为了新底层数组的窗口，而没有对原切片，及其底层数组做任何改动。</p><p>请记住，在无需扩容时，<code>append</code>函数返回的是指向原底层数组的新切片，而在需要扩容时，<code>append</code>函数返回的是指向新底层数组的新切片。所以，严格来讲，“扩容”这个词用在这里虽然形象但并不合适。不过鉴于这种称呼已经用得很广泛了，我们也没必要另找新词了。</p><p>顺便说一下，只要新长度不会超过切片的原容量，那么使用<code>append</code>函数对其追加元素的时候就不会引起扩容。这只会使紧邻切片窗口右边的（底层数组中的）元素被新的元素替换掉。你可以运行demo17.go文件以增强对这些知识的理解。</p><p><strong>总结</strong></p><p>总结一下，我们今天一起探讨了数组和切片以及它们之间的关系。切片是基于数组的，可变长的，并且非常轻快。一个切片的容量总是固定的，而且一个切片也只会与某一个底层数组绑定在一起。</p><p>此外，切片的容量总会是在切片长度和底层数组长度之间的某一个值，并且还与切片窗口最左边对应的元素在底层数组中的位置有关系。那两个分别用减法计算切片长度和容量的方法你一定要记住。</p><p>另外，<code>append</code>函数总会返回新的切片，而且如果新切片的容量比原切片的容量更大那么就意味着底层数组也是新的了。还有，你其实不必太在意切片“扩容”策略中的一些细节，只要能够理解它的基本规律并可以进行近似的估算就可以了。</p><p><strong>思考题</strong></p><p>这里仍然是聚焦于切片的问题。</p><ol>
<li>如果有多个切片指向了同一个底层数组，那么你认为应该注意些什么？</li>
<li>怎样沿用“扩容”的思想对切片进行“缩容”？请写出代码。</li>
</ol><p>这两个问题都是开放性的，你需要认真思考一下。最好在动脑的同时动动手。</p><p><a href="https://github.com/hyper0x/Golang_Puzzlers">戳此查看Go语言专栏文章配套详细代码。</a></p><p><img src="https://static001.geekbang.org/resource/image/35/48/358e4e8578a706598e18a7dfed3ed648.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">精选留言</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/5a/09/afa3e112.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">清风徐来</span>
                            </div>
                            <div class="bd">语言描述有点啰嗦太学术化，和我当时看go并发编程第二版开头几章同样的感觉，希望能更加精简一些，直接突出重点要好很多。 <br></div>
                            <span class="time">2018-08-29 22:40</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/9f/1d/ec173090.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">melon</span>
                            </div>
                            <div class="bd">初始时两个切片引用同一个底层数组，在后续操作中对某个切片的操作超出底层数组的容量时，这两个切片引用的就不是同一个数组了，比如下面这个例子:<br>s1 := []int {1,2,3,4,5}<br>s2 := s1[0:5]<br><br>s2 = append(s2, 6)<br>s1[3] = 30<br><br>此时s1[3]的值为30, s2[3]的值仍然为4，因为s2的底层数组已是扩容后的新数组了。 <br></div>
                            <span class="time">2018-08-27 11:08</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/83/4b/0e96fcae.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">sky</span>
                            </div>
                            <div class="bd">老师您好！我对源码demo16中示例1、3实际运行结果与预期结果表示ok，但唯独示例2的运行结果觉得没有什么规则可供参考，为何不是下面我预期的结果呢，对于实际的运行结果表示不理解，还烦请老师有空帮忙解答下，感谢！<br><br>代码如下：<br>&#47;&#47; 示例2<br>	s7 := make([]int, 1024)<br>	fmt.Printf(&quot;The capacity of s7: %d\n&quot;, cap(s7))<br>	s7e1 := append(s7, make([]int, 200)...)<br>	fmt.Printf(&quot;s7e1: len: %d, cap: %d\n&quot;, len(s7e1), cap(s7e1))<br>	s7e2 := append(s7, make([]int, 400)...)<br>	fmt.Printf(&quot;s7e2: len: %d, cap: %d\n&quot;, len(s7e2), cap(s7e2))<br>	s7e3 := append(s7, make([]int, 600)...)<br>	fmt.Printf(&quot;s7e3: len: %d, cap: %d\n&quot;, len(s7e3), cap(s7e3))<br>	fmt.Println()<br>实际运行结果：<br>The capacity of s7: 1024<br>s7e1: len: 1224, cap: 1280<br>s7e2: len: 1424, cap: 1696<br>s7e3: len: 1624, cap: 2048<br><br>预期运行结果：<br>The capacity of s7: 1024<br>s7e1: len: 1224, cap: 1280<br>s7e2: len: 1424, cap: 1600<br>s7e3: len: 1624, cap: 2000 <br></div>
                            <span class="time">2018-09-15 20:53</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Laughing</span>
                            </div>
                            <div class="bd">1.当两个长度不一的切片使用同一个底层数组，并且两切片的长度均小于数组的容量时，对其中长度较小的一个切片进行append操作，但不超过底层数组容量，这时会影响长度较长切片中原来比较小切片多看到的值，因为底层数组被修改了。<br>2. 可以截取切片的部分数据，然后创建新数组来缩容 <br></div>
                            <span class="time">2018-08-27 20:11</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">涛哥爱学习</span>
                            </div>
                            <div class="bd">老师可以多些图表在文章里，方便阅读 <br></div>
                            <span class="time">2018-08-30 20:33</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/d2/b2/2f19b0ad.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">wjq310</span>
                            </div>
                            <div class="bd">老师，请问下demo16.go的示例三的几个cap值是怎么来的？看这后面的值，不像是2的指数倍。更奇怪的是，我在不同的地方运行（比如把代码贴到https:&#47;&#47;golang.org&#47;go）得到的结果还不一样，不知道为什么，麻烦帮忙解答一下，感谢了 <br></div>
                            <span class="time">2018-08-28 20:16</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>作者回复</span></div>
                                <p class="reply-content">每次发现容量不够都会翻一倍，你可以从头算一下。另外，一旦超过1024每次只会增大1.25倍。</p>
                                <p class="reply-time">2018-08-29 12:10</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">有铭</span>
                            </div>
                            <div class="bd">谢谢老师，今天这篇文才让我意识到以前对切片的认知是不全面的。但也带来一个新问题，大部分语言里，类似切片的数据结构的实质就是可变数组，他们都没有窗口这个设计，golang是为啥设计了窗口这个功能呢？这个功能在实际开发中能如何应用呢？我想golang这种极简设计思想的语言，绝不会搞多余设计，必然是有某种场景，不用切片的窗口就搞不定。但是我想不出是什么 <br></div>
                            <span class="time">2018-08-27 19:02</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/f4/17/fb769d42.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">mateye</span>
                            </div>
                            <div class="bd">老师您好，就像您说的，切片赋值的话会，如果完全赋值，会指向相同的底层数组，    s1 :=[]int{1,2,3,4}    s2 := s1[0:4]    就像这样，这样的话改变s2会影响s1，如何消除这种影响呢 <br></div>
                            <span class="time">2018-08-30 23:46</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>作者回复</span></div>
                                <p class="reply-content">可以用copy函数，或者自己深拷贝。</p>
                                <p class="reply-time">2018-09-01 19:44</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/df/e2/823a04b4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">小小笑儿</span>
                            </div>
                            <div class="bd">切片缩容之后还是会引用底层的原数组，这有时候会造成大量缩容之后的多余内容没有被垃圾回收。可以使用新建一个数组然后copy的方式。 <br></div>
                            <span class="time">2018-08-29 19:45</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>作者回复</span></div>
                                <p class="reply-content">没错</p>
                                <p class="reply-time">2018-09-01 19:57</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/4e/c7/8c2d0a3d.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">余泽锋</span>
                            </div>
                            <div class="bd">1.底层数组的变动会影响多个切片<br>2.每一次缩容都需要生成新的切片 <br></div>
                            <span class="time">2018-08-27 08:52</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/43/fd/69beb2af.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">陈悬高</span>
                            </div>
                            <div class="bd">虽然 slice 间接引用了底层数组的元素，但是其指针、长度和容量却是它自己的属性。要更新一个 slice 的指针、长度或容量必须使用显式的赋值。从这个角度看，slice 并不是“纯粹”的引用类型，而是像下面这种聚合类型：<br><br>```<br>type IntSlice struct {<br>	ptr *int<br>	len, cap int<br>}<br>```<br><br>所以，不仅是在调用 `append` 函数时需要更新 slice 变量。另外，对于任何函数，只要有可能改变 slice 的长度或者容量，或者使得 slice 指向不同的底层数组，都需要更新 slice 变量。 <br></div>
                            <span class="time">2018-10-14 02:51</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/0f/09/0e28e1e1.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">mrly</span>
                            </div>
                            <div class="bd">老师，我对demo16的运行结果有疑惑，按1024*1.25*1.25*1.25来说，结果应该是这样：<br>实际运行结果：<br>The capacity of s7: 1024<br>s7e1: len: 1224, cap: 1280<br>s7e2: len: 1424, cap: 1696<br>s7e3: len: 1624, cap: 2048<br><br>预期运行结果：<br>The capacity of s7: 1024<br>s7e1: len: 1224, cap: 1280=1024*1.25<br>s7e2: len: 1424, cap: 1600=1024*1.25*1.25<br>s7e3: len: 1624, cap: 2000=1024*1.25*1.25*1.25<br><br>为什么结果不一样呢？ <br></div>
                            <span class="time">2018-09-27 23:15</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/e1/0d/ecf81935.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Empty</span>
                            </div>
                            <div class="bd">王老师，能解释一下demo16里面的第三个示例么 <br></div>
                            <span class="time">2018-09-26 15:02</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/53/30/e0930b07.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Beau Zhang</span>
                            </div>
                            <div class="bd">s9 := make([]int,  44)<br>fmt.Printf(&quot;The capacity of s9: %d\n&quot;, cap(s9))<br> s9a := append(s9, make([]int, 45)...)<br>fmt.Printf(&quot;s9a: len: %d, cap: %d\n&quot;, len(s9a), cap(s9a))<br>下面是输出结果<br>The capacity of s9: 44<br>s9a: len: 89, cap: 96<br>按照扩容的规则cap = 90才对啊<br>这是怎么回事？ <br></div>
                            <span class="time">2018-09-14 16:27</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/71/f6/ad0ad3df.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">徐宁</span>
                            </div>
                            <div class="bd">能不能少用点前者后者这类语言，很容易困惑又回头去看 <br></div>
                            <span class="time">2018-09-06 19:24</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/5e/37/1ab64338.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">qiujingzhe</span>
                            </div>
                            <div class="bd">循序渐进，由浅入深，让我这个新手也能跟得上了。 <br></div>
                            <span class="time">2018-08-27 17:59</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/48/32/834b3020.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">V</span>
                            </div>
                            <div class="bd">老师可以详细讲一下内置函数make()和new()的却别吗 <br></div>
                            <span class="time">2018-08-27 02:19</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>作者回复</span></div>
                                <p class="reply-content">关于这两个函数的用法和相应规则，Go语言规范里都说的很清楚了。你可以去 golang.google.cn&#47;doc&#47;spec 看一下，描述得很清晰。</p>
                                <p class="reply-time">2018-08-27 12:01</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/bd/68/91b6079f.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Geek_9ed474</span>
                            </div>
                            <div class="bd">package main<br><br>import &quot;fmt&quot;<br><br>func main()  {<br>	s1 := make([]int, 10)<br>	for i := 0; i &lt; 10 ; i++ {<br>		s2 := append([]int{}, s1[i:]...)<br>		fmt.Printf(&quot;s(%d): len: %d, cap: %d\n&quot;, i, len(s2), cap(s2))<br>	}<br>} <br></div>
                            <span class="time">2018-11-30 22:45</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/96/b4/19daa7cc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Action</span>
                            </div>
                            <div class="bd">老师您好！我对源码demo16中示例1、3实际运行结果与预期结果表示ok，但唯独示例2的运行结果觉得没有什么规则可供参考，为何不是下面我预期的结果呢，对于实际的运行结果表示不理解，还烦请老师有空帮忙解答下，感谢！<br><br>代码如下：<br>&#47;&#47; 示例2<br>s7 := make([]int, 1024)<br>fmt.Printf(&quot;The capacity of s7: %d\n&quot;, cap(s7))<br>s7e1 := append(s7, make([]int, 200)...)<br>fmt.Printf(&quot;s7e1: len: %d, cap: %d\n&quot;, len(s7e1), cap(s7e1))<br>s7e2 := append(s7, make([]int, 400)...)<br>fmt.Printf(&quot;s7e2: len: %d, cap: %d\n&quot;, len(s7e2), cap(s7e2))<br>s7e3 := append(s7, make([]int, 600)...)<br>fmt.Printf(&quot;s7e3: len: %d, cap: %d\n&quot;, len(s7e3), cap(s7e3))<br>fmt.Println()<br>实际运行结果：<br>The capacity of s7: 1024<br>s7e1: len: 1224, cap: 1280<br>s7e2: len: 1424, cap: 1696<br>s7e3: len: 1624, cap: 2048<br><br>预期运行结果：<br>The capacity of s7: 1024<br>s7e1: len: 1224, cap: 1280<br>s7e2: len: 1424, cap: 1600<br>s7e3: len: 1624, cap: 2000 <br></div>
                            <span class="time">2018-11-02 17:13</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>作者回复</span></div>
                                <p class="reply-content">容量很少会是1600这种，因为基本上都是以2为底的。文章中的切片扩容策略你可以再好好看一下。</p>
                                <p class="reply-time">2018-11-06 13:07</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/27/fc/b8d83d56.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">liangjf</span>
                            </div>
                            <div class="bd">一直看到这里，这章收获是比较大的，看来深层次的还是要去看源码 <br></div>
                            <span class="time">2018-11-01 09:29</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>作者回复</span></div>
                                <p class="reply-content">是的，源码之前了无秘密。</p>
                                <p class="reply-time">2018-11-06 13:11</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>